<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title></title>
    <link href="../CSS/Style1.css" rel="stylesheet" type="text/css" />
    <link href="../Scripts/jquery.showModalDialog.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.showModalDialog.js" type="text/javascript"></script>
	<script src="../js/MyJquery.js"></script>
	<script src="../js/MyAjax.js"></script>
    <script type="text/javascript">
	
		//做GitHub提交

		//	function mypage(index) {
		//	var tab = $(".dataTable");
		//	$.cursomAjax("../webServers/Role.asmx/GetRoles", null, function (d) {
		//		var str = {
		//			cols: { "ID": "角色编号", "RoleName": "角色名","aaa": "操作" },
		//			data: d,
		//			ops: [ {
		//				title: "修改",
		//				url: "EditRolePower.htm?data=" + Math.random(),
		//				type:"<span>修改权限</span>"
		//			},],
		//			id: "ID",
		//			index: index,
		//			size: 3
		//		}
		//		tab.AllModelPage(str, mypage, function (d, row) {
				
		//		});
		//	});
		//}
		//$(function () {
		//	mypage(1);
		//})


		$(function () {

			$.myAjax("../webServers/Main.asmx/GetUsersInfo", null, function (d) {
				if (d.status) {
					//拿到所有角色
					$.myAjax("../webServers/Role.asmx/GetRoles", null, function (d) {
						//alert(d);
						$.each(d, function (key, value) {
							var tr = $("<tr>");
							$("<td>").text(value.ID).appendTo(tr);
							$("<td>").text(value.RoleName).appendTo(tr);
							$(" <td>  <a href='javascript:setPower(" + value.ID + ");'>设置权限</a></td>").appendTo(tr);
							$(".dataTable").append(tr);

						});

					});
				} else {
					alert(d.UserLName);
					window.location.href = "../login.htm";
				}
			})


		});

		   function setPower(roleID) {
			   console.log(roleID);
			   $.showModalDialog("EditRolePower.htm?data=" + Math.random(), roleID, 600, 560, function () {
                //...打开模式对话窗口，设置角色权限
            });
        }

    </script>
</head>
<body>
<div id="desDiv">
    <span>权限管理</span><br />
    管理系统中所有角色的权限
</div>
<div id="dataDiv">
    <table class="dataTable">
        <tr>
            <th>角色编号</th>
            <th>角色名</th>
            <th>操作</th>
        </tr>
        <!--<tr>
            <td>数据</td>
            <td>数据</td>
            <td>
                <a href="javascript:setPower(5);">设置权限</a>
            </td>
        </tr>
        <tr>
            <td>数据</td>
            <td>数据</td>
            <td>
                <a href="javascript:setPower(6);">设置权限</a>
            </td>
        </tr>
        <tr>
            <td>数据</td>
            <td>数据</td>
            <td>
                <a href="javascript:setPower(7);">设置权限</a>
            </td>
        </tr>-->
    </table>
    <div id="pageDiv">
        <div id="leftPage">共有120条记录，当前第1/10页</div>
        <div id="rightPage">
            <input type="image" src="../images/first.gif" />&nbsp;&nbsp;
            <input type="image" src="../images/back.gif" />&nbsp;&nbsp;
            <input type="image" src="../images/next.gif" />&nbsp;&nbsp;
            <input type="image" src="../images/last.gif" />&nbsp;&nbsp;
            转到第<input type="text" size="1" />&nbsp;&nbsp;<input type="image" src="../images/go.gif" />
        </div>
    </div>
</div>
</body>
</html>
